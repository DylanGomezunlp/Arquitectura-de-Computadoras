PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
DATO DB ?
CANTCHAR DB ?
FIN DB ?

ORG 2000H
;CONFIGURO EL PIO
MOV AL, 0FDH ;FD=11111101
OUT CA, AL; HAGO TODOS LOS BITS DE ENTRADA MENOS EL DE STROBE
MOV AL,0; 0=00000000
OUT CB, AL; HAGO TODOS LOS BITS DE SALIDA PARA PODER MANDARLE EL DATO
IN AL, PA ;VEO EL ESTADO DE PA PARA MODIFICIAR EL BIT DE STROBE
AND AL, 0FDH; FUERZO A 0 EL BIT DE STROBE
OUT PA, AL
MOV BX, OFFSET CANTCHAR; LE PASO DONDE TIENE QUE GUARDAR EL DATO INGRESADO
INT 6; LEO CANTIDAD DE CARACTERES A IMPRIMIR
SUB BYTE PTR [BX], 30H; RESTO 30H PARA SABER EN LA CANTIDAD DE CARACTERES TENGO QUE IMPRIMIR, YA QUE EL DATO ME QUEDA EN HEXA Y PARA PASAR DE HEXA A DECIMAL (CUANDO SON NUMEROS) SE LE RESTA 30H
MOV CL, [BX]; PONGO EL DATO EN CL PARA VER CUANTOS TENGO QUE IMPRIMIR
POLL: IN AL, PA
AND AL, 1
JNZ POLL ;FUERZO EL BIT DE BUSY PARA VER SI LA IMPRESORA ESTA OCUPADA
MOV BX, OFFSET DATO
INT 6
MOV AL,[BX]
OUT PB, AL; ENVIO EL DATO A LA IMPRESORA
IN AL, PA; COMPRUEBO EL ESTADO DE PA-COMIENZA EL PULSO
OR AL, 2; FUERZO EL BIT DE STROBE A 1 
OUT PA, AL
IN AL, PA ;COMPRUEBO EL ESTADO DE PA
AND AL, 0FDH; FUERZO EL BIT DE STROBE A 0 PARA GENERAR EL PULSO NECESARIO
OUT PA, AL; TERMINA EL PULSO- TERMINA EL PULSO
DEC CL; DECREMENTA CL PORQUE YA IMPRIMIO ESE DATO
JNZ POLL; SE FIJA SI TERMINO DE LEER LA CANTIDAD DE CARACTERES
INT 0
END